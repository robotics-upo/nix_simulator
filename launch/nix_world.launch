<launch>
    <env name="IGN_GAZEBO_RESOURCE_PATH" value="$(find nix_simulator)/models:$(find nix_simulator)/models/sensors"/>

    <arg name="world_name" default="simple_fog.world"/>
    <arg name="model" default="nix/nix.sdf"/>

    <!-- Marsella MockUp World -->
    <include file="$(find ros_ign_gazebo)/launch/ign_gazebo.launch">
      <arg name="ign_args" value="-r -v 3 $(find nix_simulator)/worlds/$(arg world_name)"/>
      <env name="IGN_GAZEBO_RESOURCE_PATH" value="$(optenv IGN_GAZEBO_RESOURCE_PATH):$(find nix_simulator)/models:$(find nix_simulator)/models/sensors:$(find nix_simulator)/resources"/>
    </include>


    <!-- Default initial position-->
  <arg name="x_pos" default="0 " />
  <arg name="y_pos" default="0" />
  <arg name="z_pos" default="0.4 " />
    <node
    pkg="ros_ign_gazebo"
    type="create"
    name="nix_spawn"
    output="screen"
    args="-world nix_ramp -file $(find nix_simulator)/models/$(arg model) -name raposa -allow_renaming true -x $(arg x_pos) -y $(arg y_pos) -z $(arg z_pos) --timeout 3000">
    </node>


   <node
    pkg="ros_ign_bridge"
    type="parameter_bridge"
    name="$(anon ros_ign_bridge)"
    output="screen"
    args="/camera@sensor_msgs/Image@ignition.msgs.Image /lidar/points@sensor_msgs/PointCloud2@ignition.msgs.PointCloudPacked">
  </node>
    
</launch>
